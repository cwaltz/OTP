<!DOCTYPE html>
<html>
	<head>
	<title>SF Movies Results</title>
		<style type="text/css">
			html, body { height: 100%; margin: 0; padding: 0; }
			#map { height: 100%; }
		</style>
	</head>
	
	<body>
	<div style="float:left; width:40%; overflow: auto;">
	<form action="{% url 'movies:index' %}" method="get">
	<ul>
	<script type="text/javascript">
	var label = [];
	var temp = [];
	</script>
	{% if title %}
	<li> Title: {{ title }} </li>
	{% endif %}
	{% if release_year %}
	<li> Release Year: {{ release_year }}</li>
	{% endif %}
	{% if production_company %}	
	<li> Production Company: {{ production_company }} </li>
	{% endif %}
	{% if distributor %}
	<li> Distributor: {{ distributor }} </li>
	{% endif %}
	{% if director %}
	<li> Director: {{ director }} </li>
	{% endif %}
	{% if writer %}
	<li> Writer: {{ writer }} </li>
	{% endif %}
	{% if actor_1 %}
	<li> Actor(s):
		<ul>
		{% if actor_1 %}
		<li> {{ actor_1 }} </li>
		{% endif %}
		{% if actor_2 %}
		<li> {{ actor_2 }} </li>
		{% endif %}
		{% if actor_3 %}
		<li> {{ actor_3 }} </li>
		{% endif %}
		</ul>
	</li>
	{% endif %}
	<li> Location(s):
		<ul>
		{% for film in film_list %}
			{% if film.locations %}
				<li> {{ film.locations }} </li>
					<script type="text/javascript">
					temp = []
					temp.push('{{ film.title }}');
					temp.push('{{ film.release_year }}');
					temp.push('{{ film.locations }}');
					temp.push({{ film.latitude }});
					temp.push({{ film.longitude }});
					label.push(temp);
					</script>
			{% endif %}
		{% endfor %}
		</ul>
	</li>
	</ul>
	<input type="submit" value="Try again" />
	</form>
	</div>

	<div id="map" style="float:left; width: 60%; height: 100%"></div>
	<script type="text/javascript">

		var map;
		function initMap() {
			map = new google.maps.Map(document.getElementById('map'), {
				center: {lat: 37.7521662, lng: -122.4474315},
				zoom: 11
			});
			
			var myLatLng;
			for (i = 0; i < label.length; ++i)
			{
				myLatLng = {lat: label[i][3], lng: label[i][4]};
				var contentString = '<h1 id="firstHeading" class="firstHeading">label[i][0]</h1>';
				var marker = new google.maps.Marker({
					position: myLatLng,
					map: map,
					title: label[i][0] + ' (' + label[i][1] + ') @ ' + label[i][2]
				});
			}

		}

	</script>
	<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCj1SDXgNgYPk11mBJEAMeX3tJpSOKJn_M&callback=initMap">
	</script>
	</body>
</html>